(this.webpackJsonpmovie_search=this.webpackJsonpmovie_search||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},33:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"fetchMovie",(function(){return b})),n.d(c,"clearMovie",(function(){return O}));var r=n(0),s=n.n(r),i=n(12),a=n.n(i),o=(n(26),n(27),n(16)),l=n(2);n(28);function u(e){return"/"===e.split("")[e.length-1]?e.slice(0,-1):e}var d,j=n(10),h=n(8),f=n(17),v=n.n(f),x=n(20);!function(e){e[e.FETCH_MOVIE_SUCCESS=0]="FETCH_MOVIE_SUCCESS",e[e.FETCH_MOVIE_ERROR=1]="FETCH_MOVIE_ERROR",e[e.CLEAR_MOVIE=2]="CLEAR_MOVIE"}(d||(d={}));var b=function(e){return function(){var t=Object(x.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("https://api.themoviedb.org/3/search/movie?api_key=a45c898ce34824e77c4f8c0f1dd5c89c&language=ru&query=".concat(e)).then((function(e){return 404===e.status?(n({type:d.FETCH_MOVIE_ERROR,payload:404}),null):e.json()})).then((function(e){e.results.length>0?n({type:d.FETCH_MOVIE_SUCCESS,payload:e}):n({type:d.FETCH_MOVIE_ERROR,payload:404})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(){return function(e){e({type:d.CLEAR_MOVIE,payload:null})}},m=function(){var e=Object(j.b)();return Object(h.b)(c,e)},p=j.c,g=(n(33),n(1));var E=function(e){var t=e.input,n=e.suggestsBox,c=p((function(e){return e.movie.movie})),s=function(e){t.current.value=e.target.id};return Object(r.useEffect)((function(){document.addEventListener("click",(function(e){null!==n&&null!==n.current&&e.target!==t.current&&(n.current.style.display="none")}))}),[]),Object(g.jsx)("div",{children:c.results.map((function(e){var n=function(e,t){var n,c,r="";void 0!==(null===(n=t.current)||void 0===n?void 0:n.value)&&(r=null===(c=t.current)||void 0===c?void 0:c.value.trim());var s=e.toLowerCase().indexOf(r.toLowerCase());return-1===s?{before:e,search_str:"",after:""}:{before:e.split("").slice(0,s).join(""),search_str:r=e.split("").slice(s,s+r.length).join(""),after:e.split("").slice(s+r.length,e.length).join("")}}(e.title,t);return Object(g.jsxs)("button",{className:"suggestsBox-suggest",onClick:s,id:n.before+n.search_str+n.after,children:[Object(g.jsx)("span",{id:n.before+n.search_str+n.after,children:n.before}),Object(g.jsx)("span",{className:"suggestsBox-suggest-search_str",id:n.before+n.search_str+n.after,children:n.search_str}),Object(g.jsx)("span",{id:n.before+n.search_str+n.after,children:n.after})]})}))})};var N=function(){var e=Object(l.f)(),t=Object(l.h)(),n=s.a.useRef(null),c=u(t.url),r=s.a.useRef(null),i=m().fetchMovie,a=p((function(e){return e.movie.movie})),o=function(){null!==n.current&&n.current.value.trim().length>0&&e.push("".concat(c,"/movieInfo/").concat(n.current.value.trim()))},d=function(e){"Enter"===e.key&&o()},j=function(e){var t=e.target.value.trim();t.length>0&&i(t)};return null===a||void 0===a.results?Object(g.jsxs)("div",{className:"finder",children:[Object(g.jsx)("span",{className:"finder-header",children:"Movie Search"}),Object(g.jsxs)("div",{className:"finderBox",children:[Object(g.jsx)("span",{className:"finderBox-text",children:"Enter your request"}),Object(g.jsxs)("div",{className:"finderBox-searchFieldBox",children:[Object(g.jsx)("div",{className:"finderBox-searchFieldBox-content",children:Object(g.jsx)("input",{className:"finderBox-input",placeholder:"Type to search",type:"text",ref:n,onKeyPress:d,onChange:j})}),Object(g.jsx)("button",{className:"finderBox-btn",onClick:o,children:"Find"})]})]})]}):Object(g.jsxs)("div",{className:"finder",children:[Object(g.jsx)("span",{className:"finder-header",children:"Movie Search"}),Object(g.jsxs)("div",{className:"finderBox",children:[Object(g.jsx)("span",{className:"finderBox-text",children:"Enter your request"}),Object(g.jsxs)("div",{className:"finderBox-searchFieldBox",children:[Object(g.jsxs)("div",{className:"finderBox-searchFieldBox-content",children:[Object(g.jsx)("input",{className:"finderBox-input",placeholder:"Type to search",type:"text",ref:n,onKeyPress:d,onChange:j,onClick:function(e){null!==r&&(r.current.style.display="flex")}}),Object(g.jsx)("div",{className:"suggestsBox",ref:r,children:Object(g.jsx)(E,{input:n,suggestsBox:r})})]}),Object(g.jsx)("button",{className:"finderBox-btn",onClick:o,children:"Find"})]})]})]})};n(37),n(38);var _=function(e){var t=e.history,n=e.url,c=n.slice(0,n.split("").lastIndexOf("/")),r=m().clearMovie;return Object(g.jsx)("button",{className:"returnBtn",onClick:function(){t.push("".concat(c,"/")),r()},children:"Go Back"})},C=n.p+"static/media/loading.5e7239e4.png";n(39);var B=function(e){var t=e.movieEl;return Object(g.jsxs)("div",{className:"cardBox",children:[Object(g.jsx)("img",{className:"cardBox-poster",src:"https://image.tmdb.org/t/p/w185"+t.poster_path,alt:"poster"}),Object(g.jsxs)("div",{className:"cardBox-content",children:[Object(g.jsx)("span",{className:"cardBox-content-title",children:t.title}),Object(g.jsx)("div",{className:"cardBox-content-description",children:t.overview}),Object(g.jsx)("button",{className:"cardBox-content-prevButton",onClick:function(){window.location.href="https://www.themoviedb.org/movie/"+t.id},children:"Preview"})]})]})};var y=function(){var e=Object(l.f)(),t=Object(l.h)(),n=Object(l.g)(),c=u(t.url),s=p((function(e){return e.movie.movie})),i=m(),a=i.fetchMovie,o=i.clearMovie;return Object(r.useEffect)((function(){o(),a(n.movieName)}),[c,e,n]),404===s&&e.push("/movieNotFound"),null!==s&&404!==s?Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("span",{className:"container-header",children:"Movie Search"}),Object(g.jsx)("div",{className:"container-content",children:s.results.map((function(e){return Object(g.jsx)("div",{className:"container-content-cardsBox",children:Object(g.jsx)(B,{movieEl:e})})}))}),Object(g.jsx)(_,{history:e,url:c.slice(0,c.split("").lastIndexOf("/"))})]}):Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)("div",{className:"container-header",children:"Loading..."}),Object(g.jsx)("img",{className:"loadingGif",src:C,alt:"loading"})]})};n(40);var M=function(){var e=Object(l.f)(),t=u(Object(l.h)().url),n=m().clearMovie;return Object(r.useEffect)((function(){n()})),Object(g.jsxs)("div",{className:"page",children:[Object(g.jsx)("span",{className:"page-header",children:"Movie Search"}),Object(g.jsxs)("div",{className:"page-content",children:["Movie does not exist =(",Object(g.jsx)("br",{}),"    Please try again"]}),Object(g.jsx)(_,{history:e,url:t})]})},F=function(){return Object(g.jsx)(o.a,{basename:"/movie_search/build/index.html",children:Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{exact:!0,path:"/",component:N}),Object(g.jsx)(l.a,{exact:!0,path:"/movieInfo/:movieName",component:y}),Object(g.jsx)(l.a,{exact:!0,path:"/movieNotFound",component:M})]})})};var R=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(F,{})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))},S=n(21),w={movie:null},k=Object(h.c)({movie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.FETCH_MOVIE_SUCCESS:case d.FETCH_MOVIE_ERROR:case d.CLEAR_MOVIE:return{movie:t.payload};default:return e}}}),T=Object(h.d)(k,Object(h.a)(S.a));a.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(j.a,{store:T,children:Object(g.jsx)(R,{})})}),document.getElementById("root")),I()}},[[41,1,2]]]);
//# sourceMappingURL=main.5038893f.chunk.js.map